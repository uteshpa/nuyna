# nuyna 開発計画（2026年1月版）

**作成日:** 2026年1月10日  
**背景:** QA評価レポート（スコア58/100）とテスト環境の制約を基に、リリースに向けた具体的な開発計画を策定する。

---

## 1. 開発の基本方針

**最優先事項:** プロダクトの信頼性回復と品質の安定化

1.  **品質第一:** 新機能の追加は凍結し、既存の致命的な欠陥（P0, P1）の修正に集中する。
2.  **段階的リリース:** 一度に全市場を目指さず、まずiOS版の品質を確保し、次にAndroid版へと展開する。
3.  **データ駆動:** パフォーマンス目標は実機測定に基づき、現実的な数値を設定し、ユーザーに正直に伝える。
4.  **テスト自動化:** 手動テストへの依存を減らし、クラウドテストサービスと自動テストで品質を担保する。

---

## 2. 開発スプリント計画（全3スプリント）

### Sprint 1: 基盤修正スプリント (2週間)

**ゴール:** 致命的な欠陥（P0, P1）を修正し、プロダクトの信頼性を回復する。

| 優先度 | タスク | 内容 | 担当 |
| :--- | :--- | :--- | :--- |
| **P0** | **iOSメタデータ削除問題の完全解決** | カスタムPlatform Channelを実装し、iOSでメタデータが完全に削除されることを確認する。 | 開発 |
| **P1** | **UI/UXの抜本的改善** | - 操作系をボタンのみに統一（スイッチ削除）<br>- 指紋機能のUIを完全削除<br>- ワンタップ処理の実装 | 開発 |
| **P1** | **E2Eテストの導入** | Firebase Test Labを導入し、iOSでのハッピーパス（動画選択→処理→保存→メタデータ確認）の自動テストを構築する。 | QA/開発 |
| **P2** | **コードのクリーンアップ** | 未使用の依存パッケージ（4つ）を削除する。 | 開発 |

**完了定義 (DoD):**
- [ ] iOS実機（iPhone 11 Pro Max）でメタデータが完全に削除される。
- [ ] 改善されたUIが実装され、ワンタップ処理が動作する。
- [ ] Firebase Test Labで、iPhone 13/14/15のシミュレータ上でE2Eテストが成功する。
- [ ] 未使用の依存パッケージが削除され、ビルドが成功する。

---

### Sprint 2: パフォーマンス改善とテスト強化スプリント (2週間)

**ゴール:** パフォーマンスを現実的なレベルまで改善し、テストカバレッジを向上させる。

| 優先度 | タスク | 内容 | 担当 |
| :--- | :--- | :--- | :--- |
| **P1** | **パフォーマンス測定と目標再設定** | iPhone 11 Pro Maxでの実測値を基に、現行端末（iPhone 15 Pro）での処理時間を推定。現実的な目標値を設定し、UIに処理時間の目安を表示する。 | 開発/QA |
| **P1** | **パフォーマンス改善** | - **ボトルネック分析:** Flutter DevToolsでCPU/メモリ使用量を分析。<br>- **改善実装:** フレームサンプリング（30fps→15fps）や、ネイティブコード（Swift）での画像処理最適化を検討・実装。 | 開発 |
| **P1** | **Androidの初期テスト** | **クラウドテストサービス（Firebase Test Lab）** を使用し、主要なAndroid端末（Pixel 6, Galaxy S22など）でのビルドと基本動作（起動、動画選択）を確認する。 | QA |
| **P2** | **統合テストの実装** | データ層とドメイン層の間の連携を保証する統合テストを追加する。 | 開発 |

**完了定義 (DoD):**
- [ ] パフォーマンス測定結果がドキュメント化され、新しい目標値が設定される。
- [ ] パフォーマンス改善策が少なくとも1つ実装され、処理時間が短縮される。
- [ ] Firebase Test Lab上で、主要なAndroid端末でのクラッシュが発生しない。
- [ ] 統合テストが追加され、CIで成功する。

---

### Sprint 3: リリース準備とAndroid対応スプリント (3週間)

**ゴール:** iOS版のリリース準備を完了し、Android版の品質をリリース可能レベルまで引き上げる。

| 優先度 | タスク | 内容 | 担当 |
| :--- | :--- | :--- | :--- |
| **P0** | **Android実機テスト** | **調達したAndroid実機（例: Pixel 6a）** を使用し、以下の項目を徹底的にテスト：<br>- メタデータ削除機能<br>- パフォーマンス測定<br>- UIの表示崩れ<br>- ファイル保存 | QA |
| **P1** | **Android固有のバグ修正** | 実機テストで発見されたAndroid固有の問題を修正する。 | 開発 |
| **P1** | **ベータテストの実施** | TestFlight（iOS）とGoogle Play Beta（Android）で、限定的なベータテストを実施。多様な端末からのフィードバックを収集する。 | QA/マーケティング |
| **P2** | **ストア申請準備** | App StoreとGoogle Playの申請情報、スクリーンショット、プライバシーポリシーを作成する。 | 全員 |
| **P2** | **クラッシュレポート導入** | Firebase Crashlyticsを導入し、リリース後の問題監視体制を構築する。 | 開発 |

**完了定義 (DoD):**
- [ ] Android実機でのテストが完了し、P0/P1のバグが修正される。
- [ ] ベータテストが実施され、重大な問題が報告されない。
- [ ] ストア申請準備が完了する。
- [ ] クラッシュレポートが正常に動作する。

---

## 3. タイムラインとマイルストーン

| スプリント | 期間 | 主要マイルストーン |
| :--- | :--- | :--- |
| **Sprint 1** | 2週間 | **プロダクトの安定化**（P0/P1バグ修正） |
| **Sprint 2** | 2週間 | **パフォーマンス目標達成**（現実的な目標設定と改善） |
| **Sprint 3** | 3週間 | **リリース候補版（RC）完成**（iOS/Android対応） |
| **リリース** | 1週間 | **段階的ロールアウト**（まず日本市場から） |

**合計期間: 8週間**

---

## 4. テスト環境に関するリスク対策

### 4.1. Androidテスト環境の欠如

**問題:** 最終スプリントまでAndroid実機テストができない。

**対策:**
1.  **クラウドテストの積極活用（Sprint 2）**
    - Firebase Test Labで、開発の早い段階からAndroidでのクラッシュや基本的な動作不良を検知する。
2.  **Flutterのクロスプラットフォーム性を信頼**
    - ビジネスロジックの大部分はDartで共通化されているため、iOSで品質を確保すれば、AndroidでのリスクはUIとネイティブ連携部に限定される。
3.  **最終スプリントでの集中テスト（Sprint 3）**
    - 調達したAndroid実機とクラウドテストを組み合わせ、最終スプリントで集中的にテストと修正を行う。

### 4.2. iOSテスト端末の旧世代問題

**問題:** iPhone 11 Pro Maxは市場の性能を代表していない。

**対策:**
1.  **ベンチマーク係数の適用**
    - 常にiPhone 11 Pro Maxでの測定結果に**2.2倍**の係数を乗じ、現行端末（iPhone 15 Pro）の性能を推定する。
    - これにより、パフォーマンス目標を現実的に評価する。
2.  **クラウドテストでの補完**
    - Firebase Test Labで、新しいiOSバージョンとデバイスでの動作を補完的に確認する。
3.  **ベータテストでの多様なフィードバック**
    - TestFlightを通じて、多様なiPhoneモデルを持つユーザーからのフィードバックを収集する。

---

## 5. 結論

本計画は、**品質の低い状態から脱却し、信頼性の高いプロダクトとしてリリースするための最短経路**を示すものです。

**成功の鍵:**
- **P0/P1問題の徹底的な修正**
- **クラウドテストサービスの即時導入**
- **現実的なパフォーマンス目標の設定**

この計画を厳格に実行することで、8週間後に自信を持ってプロダクトを市場に投入できる状態を目指します。
