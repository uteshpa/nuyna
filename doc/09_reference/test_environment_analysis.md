# テスト環境の制約とリスク評価

**評価日:** 2026年1月10日

---

## 1. 現在のテスト環境

### 利用可能な実機

| プラットフォーム | デバイス | リリース年 | 経過年数 | 市場での位置付け |
| :--- | :--- | :--- | :--- | :--- |
| **iOS** | iPhone 11 Pro Max | 2019年 | 5.3年 | ローエンド相当 |
| **Android** | なし | - | - | **テスト不可** |

### テスト環境の制約

1. **iOS実機が1台のみ**
   - デバイスの多様性を検証できない
   - 世代が古く、現行端末の性能を代表していない

2. **Android実機が存在しない**
   - Androidでの動作を一切検証できない
   - 市場シェア72%のプラットフォームが未検証

3. **最終スプリントまでAndroidテスト不可**
   - 開発期間中、Androidの問題を発見・修正できない
   - リリース直前に致命的な問題が発覚するリスク

---

## 2. 市場データに基づくリスク評価

### 2.1. プラットフォーム市場シェア（2025年）

| プラットフォーム | グローバル | 日本 | 米国 |
| :--- | :--- | :--- | :--- |
| **Android** | 72% | 36% | 42% |
| **iOS** | 28% | 64% | 58% |

**出典:** StatCounter (2025年12月)

### 2.2. iPhoneモデル別シェア（2025年末）

| モデル | シェア | リリース年 |
| :--- | :--- | :--- |
| **iPhone 13** | 15.3% | 2021年 |
| **iPhone 14** | 12.8% | 2022年 |
| **iPhone 15** | 11.5% | 2023年 |
| **iPhone 12** | 9.7% | 2020年 |
| **iPhone 11** | 7.2% | 2019年 |
| **iPhone 16** | 6.4% | 2024年 |
| その他 | 37.1% | - |

**出典:** TelemetryDeck (2025年末)

### 2.3. テスト端末の市場代表性

**iPhone 11 Pro Max（テスト端末）:**
- **市場シェア:** 約2-3%（iPhone 11シリーズ全体で7.2%）
- **性能:** 現行端末（iPhone 15 Pro）の**約半分以下**
- **代表性:** **極めて低い**

**結論:** テスト端末は、市場の大多数のユーザーが使用している端末を代表していません。

---

## 3. リスク評価マトリクス

### 3.1. iOS関連リスク

| リスク | 影響度 | 発生確率 | リスクレベル | 説明 |
| :--- | :--- | :--- | :--- | :--- |
| **パフォーマンス誤評価** | 高 | 極めて高い | **P0** | 旧端末での測定結果が、現行端末の性能を反映しない |
| **新しいiOSバージョンでの不具合** | 中 | 中 | **P1** | iOS 26.2での動作は確認できるが、iOS 27以降は未検証 |
| **デバイス多様性の欠如** | 中 | 高 | **P1** | 画面サイズ、解像度、メモリ容量の違いを検証できない |

### 3.2. Android関連リスク

| リスク | 影響度 | 発生確率 | リスクレベル | 説明 |
| :--- | :--- | :--- | :--- | :--- |
| **Androidでの動作不良** | 極めて高 | 高 | **P0** | 市場シェア72%のプラットフォームが未検証 |
| **メタデータ削除の動作差異** | 高 | 中 | **P0** | iOSとAndroidでFFmpegの動作が異なる可能性 |
| **パフォーマンス問題** | 高 | 中 | **P1** | Androidデバイスの性能多様性が極めて高い |
| **UI/UXの問題** | 中 | 中 | **P1** | Material Designとの整合性、画面サイズの多様性 |
| **ビルド失敗** | 中 | 低 | **P2** | CIでビルドは成功しているが、実機での動作は未確認 |

---

## 4. 定量的リスク評価

### 4.1. 市場カバレッジ

**現在のテスト環境でカバーできる市場:**

| 地域 | カバー率 | 未カバー率 |
| :--- | :--- | :--- |
| **グローバル** | 約1%（iPhone 11 Pro Max） | **99%** |
| **日本** | 約2%（iPhone 11 Pro Max） | **98%** |
| **米国** | 約1%（iPhone 11 Pro Max） | **99%** |

**結論:** 現在のテスト環境では、**市場の99%のユーザーが使用する端末での動作を検証できません。**

### 4.2. パフォーマンス外挿の誤差

**iPhone 11 Pro Max（A13 Bionic）から現行端末への外挿:**

| 端末 | 性能比 | 外挿誤差 |
| :--- | :--- | :--- |
| **iPhone 15 Pro（A17 Pro）** | 2.2倍 | ±20-30% |
| **iPhone 14 Pro（A16 Bionic）** | 1.8倍 | ±15-25% |
| **iPhone 13 Pro（A15 Bionic）** | 1.5倍 | ±10-20% |

**結論:** 旧端末での測定結果から現行端末の性能を予測する際、**±20-30%の誤差**が生じる可能性があります。

---

## 5. リスク軽減策

### 5.1. 短期対策（即座に実施可能）

1. **シミュレータでの広範なテスト**
   - 複数のiOSバージョンとデバイスサイズでテスト
   - ただし、パフォーマンスは測定不可

2. **ベンチマーク係数の適用**
   - iPhone 11 Pro Maxでの測定結果に、性能比（2.2倍）を乗じて現行端末の性能を推定
   - ただし、±20-30%の誤差を考慮

3. **CI/CDでのビルド検証**
   - Androidビルドが成功することを継続的に確認
   - ただし、実機での動作は未検証

### 5.2. 中期対策（最終スプリント前に実施）

1. **クラウドテストサービスの活用**
   - Firebase Test Lab、AWS Device Farm、BrowserStackなどを利用
   - 複数のiOS/Androidデバイスでの自動テストを実施

2. **ベータテスターの募集**
   - TestFlightやGoogle Play Betaで、多様な端末を持つユーザーにテストを依頼
   - 実際のユーザー環境での動作を検証

3. **Android実機の調達**
   - 中古のミドルレンジAndroid端末（例: Pixel 6a、Galaxy A54）を購入
   - 最低限の実機テストを実施

### 5.3. 長期対策（リリース後）

1. **クラッシュレポートの監視**
   - Firebase Crashlytics、Sentryなどを導入
   - リリース後の問題を迅速に検知・対応

2. **段階的ロールアウト**
   - 最初は限定的なユーザーにリリースし、問題がないことを確認してから全体に展開

---

## 6. 推奨事項

### 優先度P0（必須）

1. **クラウドテストサービスの即座の導入**
   - Firebase Test Labを使用し、最低限以下のデバイスでテスト:
     - iOS: iPhone 13, 14, 15（各最新OS）
     - Android: Pixel 6, Galaxy S22, Xiaomi 12（各Android 13, 14）

2. **パフォーマンス測定の現実的な目標設定**
   - iPhone 11 Pro Maxでの測定結果を基に、現行端末での処理時間を推定
   - ユーザーに対して、正直な処理時間の目安を提示

### 優先度P1（強く推奨）

1. **Android実機の調達**
   - 最低1台のミドルレンジAndroid端末を購入（予算: 約3-5万円）
   - 最終スプリント前に、基本的な動作を検証

2. **ベータテストプログラムの開始**
   - 最終スプリント前に、TestFlightで限定的なベータテストを実施
   - 多様な端末での動作フィードバックを収集

---

## 7. 結論

**現在のテスト環境は、プロダクトの品質を保証するには極めて不十分です。**

特に、以下の2点が致命的です：

1. **市場の99%のユーザーが使用する端末での動作が未検証**
2. **Androidプラットフォーム（市場シェア72%）が完全に未検証**

これらのリスクを軽減するために、**クラウドテストサービスの即座の導入**と**Android実機の調達**を強く推奨します。
